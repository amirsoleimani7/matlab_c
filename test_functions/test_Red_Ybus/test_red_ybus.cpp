#include "H_header.h"

int main()
{
      
    Eigen::MatrixXd bus_sol(13, 15);

    bus_sol << 1, 1.03, 18.5, 7.05364890186703, 1.23953053120829, 0, 0, 0, 0, 1, 5, -1, 22, 1.1, 0.9,
                2, 1.01, 8.76830035392834, 6.99999999999921, 0.843761273386871, 0, 0, 0, 0, 2, 5, -1, 22, 1.1, 0.9,
                3, 1.00551747287907, -5.84234704363831, 0, 0, 3.09e-11, -6.51E-12, 0, 3, 3, 9999, -9999, 230, 1.5, 0.5,
                4, 0.999327628435654, -8.62600457254533, 0, 0, 9.7599999999755, 0.999999999997201, 0, 0, 3, 9999, -9999, 115, 1.05, 0.95,
                5, 1.016357678025, 12.039146157203, 0, 0, 2.20e-12, -5.72e-13, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5,
                6, 1.03, -4.73268228701833, 7.15999999999979, 1.22291484500566, 0, 0, 0, 0, 2, 5, -1, 22, 1.1, 0.9,
                7, 1.01, -14.7063566515766, 6.99999999999859, 0.744532621092242, 0, 0, 0, 0, 2, 5, -1, 22, 1.1, 0.9,
                8, 1.00886090472548, -29.3350872238569, 0, 0, -1.31e-11, -4.72e-12, 0, 5, 3, 9999, -9999, 230, 1.5, 0.5,
                9, 0.999993581119612, -34.3534756058852, 0, 0, 17.6499999999614, 0.99999999999352, 0, 0, 3, 9999, -9999, 115, 1.05, 0.95,
                10, 1.00275089416247, 2.14015834870714, 0, 0, 1.01e-11, -1.85e-12, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5,
                11, 1.05528637043428, -18.0106505165853, 0, 0, 6.99e-12, -1.51e-11, 0, 2, 3, 2, -9999, 500, 1.5, 0.5,
                12, 1.01682078943563, -11.2883736245603, 0, 0, 1.78e-12, -9.71e-14, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5,
                13, 1.00438065719622, -21.3236953536107, 0, 0, 1.84e-11, -2.43e-12, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5;

    std::cout << "bus_sol matrix:\n" << bus_sol << std::endl;

    Eigen::MatrixXd line(14, 10);

    line << 1, 5, 0, 0.0167, 0, 1, 0, 0, 0, 0,
            2, 10, 0, 0.0167, 0, 1, 0, 0, 0, 0,
            3, 4, 0, 0.005, 0, 1, 0, 1.2, 0.8, 0.02,
            3, 10, 0.001, 0.01, 0.0175, 1, 0, 0, 0, 0,
            3, 11, 0.011, 0.11, 0.1925, 1, 0, 0, 0, 0,
            3, 11, 0.011, 0.11, 0.1925, 1, 0, 0, 0, 0,
            5, 10, 0.0025, 0.025, 0.0437, 1, 0, 0, 0, 0,
            6, 12, 0, 0.0167, 0, 1, 0, 0, 0, 0,
            7, 13, 0, 0.0167, 0, 1, 0, 0, 0, 0,
            8, 11, 0.011, 0.11, 0.1925, 1, 0, 0, 0, 0,
            8, 11, 0.011, 0.11, 0.1925, 1, 0, 0, 0, 0,
            8, 9, 0, 0.005, 0, 1, 0, 1.2, 0.8, 0.02,
            8, 13, 0.001, 0.01, 0.0175, 1, 0, 0, 0, 0,
            12, 13, 0.0025, 0.025, 0.0437, 1, 0, 0, 0, 0;

    std::cout << "line matrix:\n" << line << std::endl;

    Eigen::MatrixXd load_con(2, 5);

    load_con << 4, 0, 0, 0, 0,
                9, 0, 0, 0, 0;

    std::cout << "load_con matrix:\n" << load_con << std::endl;

    Eigen::MatrixXd mac_con(4, 19);

    mac_con << 1, 1, 900, 0.2, 0, 0, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 6.5, 0, 0, 1,
               2, 2, 900, 0.2, 0, 0, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 6.5, 0, 0, 2,
               3, 6, 900, 0.2, 0, 0, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 6.5, 0, 0, 6,
               4, 7, 900, 0.2, 0, 0, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 6.5, 0, 0, 7;

    std::cout << "mac_con matrix:\n" << mac_con << std::endl;
    
    double basmva = 100.0;
    
    red_ybus(bus_sol,line,mac_con,load_con,basmva);
    


}