#include "H_header.h"

using namespace Eigen;
using namespace std;


int main(){
    /* 
    void mac_em(MatrixXd bus ,MatrixXd mac_con ,MatrixXd bus_int ,MatrixXd mac_em_idx,
    double i ,double k , double flag ,double n_em,double basmva)
    */

    MatrixXd bus(13, 15);
    bus << 1, 1.03, 18.5, 7.07208905720192, 1.51664870317644, 0, 0, 0, 0, 1, 5, -1, 22, 1.1, 0.9,
        2, 1.01, 8.65333712510409, 7, 1.50012540135624, 0, 0, 0, 0, 2, 5, -1, 22, 1.1, 0.9,
        3, 0.986215032460351, -6.2341810664558, 0, 0, 1.14e-15, 1.04e-14, 0, 3, 3, 9999, -9999, 230, 1.5, 0.5,
        4, 0.979853906822329, -9.12881913979737, 0, 0, 9.75999999999999, 0.999999999999988, 0, 0, 3, 9999, -9999, 115, 1.05, 0.95,
        5, 1.01192709368599, 11.9936989831202, 0, 0, 1.76e-15, 3.74e-16, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5,
        6, 1.03, -6.63242478119766, 7.16, 1.53633195339319, 0, 0, 0, 0, 2, 5, -1, 22, 1.1, 0.9,
        7, 1.01, -16.6903267828696, 7, 1.49778866361151, 0, 0, 0, 0, 2, 5, -1, 22, 1.1, 0.9,
        8, 0.986635288529011, -31.6259385696317, 0, 0, 5.93e-14, 2.94e-14, 0, 5, 3, 9999, -9999, 230, 1.5, 0.5,
        9, 0.977379296966083, -36.8767406225977, 0, 0, 17.6499999999999, 0.999999999999931, 0, 0, 3, 9999, -9999, 115, 1.05, 0.95,
        10, 0.991971469432817, 1.95284094737815, 0, 0, 1.92e-15, -5.64e-14, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5,
        11, 1, -19.1572756109697, -6.16e-15, 0.985907941397363, 0, 0, 0, 0, 2, 2, -9999, 500, 1.5, 0.5,
        12, 1.01177256547792, -13.2209702172225, 0, 0, 3.29e-15, 1.40e-14, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5,
        13, 0.99200984268624, -23.3905625817613, 0, 0, 8.71e-14, 2.38e-14, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5;

    cout << "bus is \n" << bus << "\n";
    
    MatrixXd mac_con(4, 23);
    mac_con << 1, 1, 900, 0.2, 0, 0, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 6.5, 0, 0, 1, 0, 0, 1, 1,
           2, 2, 900, 0.2, 0, 0, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 6.5, 0, 0, 2, 0, 0, 1, 1,
           3, 6, 900, 0.2, 0, 0, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 6.5, 0, 0, 6, 0, 0, 1, 1,
           4, 7, 900, 0.2, 0, 0, 0.25, 0, 0, 0, 0, 0, 0, 0, 0, 6.5, 0, 0, 7, 0, 0, 1, 1;

    cout << "mac_con is \n" << mac_con << "\n";

    MatrixXi bus_int(13, 1);
    bus_int << 1,
            2,
            3,
            4,
            5,
            6,
            7,
            8,
            9,
            10,
            11,
            12,
            13;
    
    cout << "bus_int is \n" << bus_int << "\n";

    MatrixXi mac_em_idx(4, 1);
    mac_em_idx << 1,
                2,
                3,
                4;

    cout << "mac_em_idx is \n" << mac_em_idx << "\n";

    double i = 0;
    double k = 1;
    double flag = 0;
    double n_em = 4;
    double basmva = 100;

    mac_em(bus,mac_con,bus_int,mac_em_idx,i,k,flag,n_em,basmva);

    return 0;
}