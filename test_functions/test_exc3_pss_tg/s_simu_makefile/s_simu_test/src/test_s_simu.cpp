#include "../include/H_header.h"

using namespace Eigen;
using namespace std;

int main(){

        //1st test for s_simu
    Eigen::MatrixXd bus(13, 15);
    bus << 1, 1.0100, 18.5000, 7.2615, 1.2740, 0.0000, 0.0000, 0.0000, 0.0000, 1.0000, 5.0000, -2.0000, 22.0000, 1.1000, 0.9000,
           2, 1.0100, 7.7250, 7.0000, 1.9480, 0.0000, 0.0000, 0.0000, 0.0000, 2.0000, 5.0000, -2.0000, 22.0000, 1.1000, 0.9000,
           3, 0.9791, -7.4410, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 3.0000, 3.0000, 0.0000, 0.0000, 230.0000, 1.5000, 0.5000,
           4, 0.9980, -10.2320, 0.0000, 0.0000, 9.7600, 1.0000, 0.0000, 0.0000, 3.0000, 0.0000, 0.0000, 115.0000, 1.0500, 0.9500,
           5, 0.9962, 11.5780, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 3.0000, 0.0000, 0.0000, 230.0000, 1.5000, 0.5000,
           6, 1.0100, -9.0124, 7.0000, 1.1430, 0.0000, 0.0000, 0.0000, 0.0000, 2.0000, 5.0000, -2.0000, 22.0000, 1.1000, 0.9000,
           7, 1.0100, -19.1200, 7.0000, 1.7840, 0.0000, 0.0000, 0.0000, 0.0000, 2.0000, 5.0000, -2.0000, 22.0000, 1.1000, 0.9000,
           8, 0.9863, -34.0630, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 5.0000, 3.0000, 0.0000, 0.0000, 230.0000, 1.5000, 0.5000,
           9, 1.0062, -39.0200, 0.0000, 0.0000, 17.6500, 1.0000, 0.0000, 0.0000, 3.0000, 0.0000, 0.0000, 115.0000, 1.0500, 0.9500,
           10, 0.9847, 0.9748, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 3.0000, 0.0000, 0.0000, 230.0000, 1.5000, 0.5000,
           11, 1.0003, -21.0540, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 1.2700, 3.0000, 0.0000, 0.0000, 230.0000, 1.5000, 0.5000,
           12, 0.9980, -15.6900, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 3.0000, 0.0000, 0.0000, 230.0000, 1.5000, 0.5000,
           13, 0.9877, -25.8700, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 3.0000, 0.0000, 0.0000, 230.0000, 1.5000, 0.5000;

    std::cout << "Bus Matrix:\n" << bus << std::endl;
    MatrixXd line(14, 10);
    line << 1.0000, 5.0000, 0.0000, 0.0167, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,
            2.0000, 10.0000, 0.0000, 0.0167, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,
            3.0000, 4.0000, 0.0000, 0.0050, 0.0000, 0.9750, 0.0000, 1.2000, 0.8000, 0.0063,
            3.0000, 10.0000, 0.0010, 0.0100, 0.0175, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,
            3.0000, 11.0000, 0.0110, 0.1100, 0.1925, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,
            3.0000, 11.0000, 0.0110, 0.1100, 0.1925, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,
            5.0000, 10.0000, 0.0025, 0.0250, 0.0437, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,
            6.0000, 12.0000, 0.0000, 0.0167, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,
            7.0000, 13.0000, 0.0000, 0.0167, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,
            8.0000, 11.0000, 0.0110, 0.1100, 0.1925, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,
            8.0000, 11.0000, 0.0110, 0.1100, 0.1925, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,
            8.0000, 9.0000, 0.0000, 0.0050, 0.0000, 0.9688, 0.0000, 1.2000, 0.8000, 0.0063,
            8.0000, 13.0000, 0.0010, 0.0100, 0.0175, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,
            12.0000, 13.0000, 0.0025, 0.0250, 0.0437, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000;

    cout << "line is : \n" << line << "\n";

    MatrixXd mac_con(4, 21);
    mac_con << 1.0000, 1.0000, 900.0000, 0.2000, 0.0000, 1.8000, 0.3000, 0.2500, 8.0000, 0.0300, 1.7000, 0.5500, 0.2400, 0.4000, 0.0500, 6.5000, 0.0000, 0.0000, 1.0000, 0.0654, 0.5743,
            2.0000, 2.0000, 900.0000, 0.2000, 0.0000, 1.8000, 0.3000, 0.2500, 8.0000, 0.0300, 1.7000, 0.5500, 0.2500, 0.4000, 0.0500, 6.5000, 0.0000, 0.0000, 2.0000, 0.0654, 0.5743,
            3.0000, 6.0000, 900.0000, 0.2000, 0.0000, 1.8000, 0.3000, 0.2500, 8.0000, 0.0300, 1.7000, 0.5500, 0.2400, 0.4000, 0.0500, 6.5000, 0.0000, 0.0000, 3.0000, 0.0654, 0.5743,
            4.0000, 7.0000, 900.0000, 0.2000, 0.0000, 1.8000, 0.3000, 0.2500, 8.0000, 0.0300, 1.7000, 0.5500, 0.2500, 0.4000, 0.0500, 6.5000, 0.0000, 0.0000, 4.0000, 0.0654, 0.5743;

    cout << "mac_con is : \n" << mac_con << "\n";

    MatrixXd load_con(2, 5);
    load_con << 4.0000, 0.0000, 0.0000, 0.5000, 0.0000,
                9.0000, 0.0000, 0.0000, 0.5000, 0.0000;


    cout  << "load_con is : \n" << load_con << "\n";

    MatrixXd exc_con(4, 20);
    
    exc_con << 3.0000, 1.0000, 0.0000, 7.0400, 0.4000, 6.6700, 1.0000, 7.5700, 0.0000, 0.2000, -0.2000, 200.0000, 4.3650, 20.0000, 4.8300, 0.0910, 1.0960, 6.5300, 1.0000, 6.5300,
                3.0000, 2.0000, 0.0000, 7.0400, 0.4000, 6.6700, 1.0000, 7.5700, 0.0000, 0.2000, -0.2000, 200.0000, 4.3650, 20.0000, 4.8300, 0.0910, 1.0960, 6.5300, 1.0000, 6.5300,
                3.0000, 3.0000, 0.0000, 7.0400, 0.4000, 6.6700, 1.0000, 7.5700, 0.0000, 0.2000, -0.2000, 200.0000, 4.3650, 20.0000, 4.8300, 0.0910, 1.0960, 6.5300, 1.0000, 6.5300,
                3.0000, 4.0000, 0.0000, 7.0400, 0.4000, 6.6700, 1.0000, 7.5700, 0.0000, 0.2000, -0.2000, 200.0000, 4.3650, 20.0000, 4.8300, 0.0910, 1.0960, 6.5300, 1.0000, 6.5300;


    cout << "exc_con is : \n" << exc_con << "\n";

    MatrixXd pss_con(4, 10);
    pss_con << 1.0000, 1.0000, 100.0000, 10.0000, 0.0500, 0.0100, 0.0500, 0.0100, 0.2000, -0.0500,
            1.0000, 2.0000, 100.0000, 10.0000, 0.0500, 0.0100, 0.0500, 0.0100, 0.2000, -0.0500,
            1.0000, 3.0000, 100.0000, 10.0000, 0.0500, 0.0100, 0.0500, 0.0100, 0.2000, -0.0500,
            1.0000, 4.0000, 100.0000, 10.0000, 0.0500, 0.0100, 0.0500, 0.0100, 0.2000, -0.0500;

    cout << "pss_con is : \n" << pss_con << "\n";


    MatrixXd tg_con(4, 10);
    tg_con << 1.0000, 1.0000, 1.0000, 25.0000, 1.0000, 0.1000, 0.5000, 0.0000, 1.2500, 5.0000,
            1.0000, 2.0000, 1.0000, 25.0000, 1.0000, 0.1000, 0.5000, 0.0000, 1.2500, 5.0000,
            1.0000, 3.0000, 1.0000, 25.0000, 1.0000, 0.1000, 0.5000, 0.0000, 1.2500, 5.0000,
            1.0000, 4.0000, 1.0000, 25.0000, 1.0000, 0.1000, 0.5000, 0.0000, 1.2500, 5.0000;


    cout << "tg_con is : \n" << tg_con << "\n";

    MatrixXd sw_con(7, 7);
    sw_con << 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0100,
            0.1000, 3.0000, 11.0000, 0.0000, 0.0000, 7.0000, 0.0100,
            0.1500, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0100,
            0.2000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0100,
            0.5000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0100,
            1.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0100,
            5.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000;

    cout << "sw_con is : \n" <<  sw_con << "\n";
    cout << "this is before the function is called \n";

    s_simu(bus, line,mac_con , load_con , exc_con , pss_con , tg_con , sw_con);

    cout << "this is after the s_simu is finished\n";

        MatrixXd bus(13, 15);
        bus <<  1,    1.01,   18.5,   7.2615, 1.274, 0, 0, 0, 0, 1, 5,  -2, 22,   1.1, 0.9,
                2,    1.01,   7.725,  7,      1.948, 0, 0, 0, 0, 2, 5,  -2, 22,   1.1, 0.9,
                3,    0.9791, -7.441, 0,      0,     0, 0, 0, 3, 3, 0,   0, 230,  1.5, 0.5,
                4,    0.998,  -10.232,0,      0,     9.76, 1, 0, 0, 3, 0,   0, 115,  1.05, 0.95,
                5,    0.9962, 11.578, 0,      0,     0,  0, 0, 0, 3, 0,   0, 230,  1.5, 0.5,
                6,    1.01,   -9.0124,7,      1.143, 0,  0, 0, 0, 2, 5,  -2, 22,   1.1, 0.9,
                7,    1.01,   -19.12, 7,      1.784, 0,  0, 0, 0, 2, 5,  -2, 22,   1.1, 0.9,
                8,    0.9863, -34.063,0,      0,     0,  0, 0, 5, 3, 0,   0, 230,  1.5, 0.5,
                9,    1.0062, -39.02, 0,      0,     17.65,1, 0, 0, 3, 0,   0, 115,  1.05, 0.95,
               10,    0.9847,  0.9748,0,      0,     0,  0, 0, 0, 3, 0,   0, 230,  1.5, 0.5,
               11,    1.0003, -21.054,0,      0,     0,  0, 0, 1.27,3, 0,  0, 230,  1.5, 0.5,
               12,    0.998,  -15.69, 0,      0,     0,  0, 0, 0, 3, 0,   0, 230,  1.5, 0.5,
               13,    0.9877, -25.87, 0,      0,     0,  0, 0, 0, 3, 0,   0, 230,  1.5, 0.5;
    
               
        // cout << "bus =\n" << bus << endl;

        // MatrixXd mac_con(4, 21);
        // mac_con << 1, 1, 900, 0.2, 0, 1.8, 0.3, 0.27, 8, 0.03, 1.7, 0.55, 0.24, 0.4, 0.05, 6.5, 0, 0, 1, 0.0654, 0.5743,
        //            2, 2, 900, 0.2, 0, 1.8, 0.3, 0,    8, 0.03, 1.7, 0.55, 0.25, 0.4, 0.05, 6.5, 0, 0, 2, 0.0654, 0.5743,
        //            3, 6, 900, 0.2, 0, 1.8, 0.3, 0.27, 8, 0.03, 1.7, 0.55, 0.24, 0.4, 0.05, 6.5, 0, 0, 6, 0.0654, 0.5743,
        //            4, 7, 900, 0.2, 0, 1.8, 0.3, 0,    8, 0.03, 1.7, 0.55, 0.25, 0.4, 0.05, 6.5, 0, 0, 7, 0.0654, 0.5743;
    
        // cout << "mac_con =\n" << mac_con << endl;

        // MatrixXd line(14, 10);
        // line << 1, 5, 0, 0.0167, 0, 1, 0, 0, 0, 0,
        //         2, 10, 0, 0.0167, 0, 1, 0, 0, 0, 0,
        //         3, 4, 0, 0.005, 0, 0.975, 0, 1.2, 0.8, 0.00625,
        //         3, 10, 0.001, 0.01, 0.0175, 1, 0, 0, 0, 0,
        //         3, 11, 0.011, 0.11, 0.1925, 1, 0, 0, 0, 0,
        //         3, 11, 0.011, 0.11, 0.1925, 1, 0, 0, 0, 0,
        //         5, 10, 0.0025, 0.025, 0.0437, 1, 0, 0, 0, 0,
        //         6, 12, 0, 0.0167, 0, 1, 0, 0, 0, 0,
        //         7, 13, 0, 0.0167, 0, 1, 0, 0, 0, 0,
        //         8, 11, 0.011, 0.11, 0.1925, 1, 0, 0, 0, 0,
        //         8, 11, 0.011, 0.11, 0.1925, 1, 0, 0, 0, 0,
        //         8, 9, 0, 0.005, 0, 0.9688, 0, 1.2, 0.8, 0.00625,
        //         8, 13, 0.001, 0.01, 0.0175, 1, 0, 0, 0, 0,
        //         12, 13, 0.0025, 0.025, 0.0437, 1, 0, 0, 0, 0;
    
        // cout << "line =\n" << line << endl;

        // MatrixXd exc_con(4, 20);
        // exc_con << 3, 1, 0, 300, 0.4, 0, 1, 7.57, 0, 0.2, -0.2, 200, 4.365, 20, 4.83, 0.091, 1.096, 40, 1, 6.53,
        //            3, 2, 0.03, 300, 0, 0, 1, 7.57, 0, 0.2, -0.2, 200, 4.365, 20, 4.83, 0.091, 1.096, 40, 1, 6.53,
        //            3, 3, 0.03, 300, 0.4, 6.67, 1, 7.57, 0, 0.2, -0.2, 200, 4.365, 20, 4.83, 0.091, 1.096, 40, 1, 6.53,
        //            3, 4, 0, 300, 0, 6.67, 1, 7.57, 0, 0.2, -0.2, 200, 4.365, 20, 4.83, 0.091, 1.096, 40, 1, 6.53;
    
        // cout << "exc_con =\n" << exc_con << endl;

        // MatrixXd pss_con(3, 10);
        // pss_con << 1, 2, 100, 10, 0.05, 0.01, 0.05, 0,    0.2, -0.05,
        //            1, 3, 100, 10, 0.05, 0.01, 0.05, 0,    0.2, -0.05,
        //            1, 4, 100, 10, 0.05, 0.01, 0.05, 0.01, 0.2, -0.05;
    
        // cout << "pss_con =\n" << pss_con << endl;

        // MatrixXd load_con(2, 5);
        // load_con << 4, 0, 0, 0.5, 0,
        //             9, 0, 0, 0.5, 0;
    
        // cout << "load_con =\n" << load_con << endl;

        // MatrixXd sw_con(7, 7);
        // sw_con << 0,    0,    0,    0,    0,    0,    0.01,
        //           0.1,  3,    11,   0,    0,    7,    0.005,
        //           0.15, 0,    0,    0,    0,    0,    0.01,
        //           0.2,  0,    0,    0,    0,    0,    0.01,
        //           0.5,  0,    0,    0,    0,    0,    0.015,
        //           1,    0,    0,    0,    0,    0,    0.02,
        //           3,    0,    0,    0,    0,    0,    0;
    
        // cout << "sw_con =\n" << sw_con << endl;

        // MatrixXd tg_con(3, 10);
        // tg_con << 1, 1, 1, 25, 1, 0.1, 0.5, 0, 1.25, 5,
        //           1, 2, 1, 25, 1, 0.1, 0.5, 0, 1.25, 5,
        //           1, 4, 1, 25, 1, 0.1, 0.5, 0, 1.25, 5;
        
        // cout << "tg_con =\n" << tg_con << endl;

        // s_simu(bus, line,mac_con , load_con , exc_con , pss_con , tg_con , sw_con);

        // cout << "this is after s_simu\n";



        // cout << "we are done here cheers\n";
        // cout << "damn bruh\n";

    return 0;
}