#include "H_header.h"


using namespace std;
using namespace Eigen;


int main(){

    MatrixXd bus(13, 15);
    bus << 1, 1.03, 18.5, 7.076368337392, 1.32366592414341, 0, 0, 0, 0, 1, 5, -1, 22, 1.1, 0.9,
        2, 1.01, 8.69384730358977, 7, 1.03358442419304, 0, 0, 0, 0, 2, 5, -1, 22, 1.1, 0.9,
        3, 1, -6.00523145216382, -1.42e-13, 1.22489072886109, 0, 0, 0, 3, 2, 9999, -9999, 230, 1.5, 0.5,
        4, 0.993762172162507, -8.81994817210691, 0, 0, 9.76, 0.999999999999991, 0, 0, 3, 9999, -9999, 115, 1.05, 0.95,
        5, 1.01504378758333, 12.0098208558377, 0, 0, -2.63e-16, -7.43e-15, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5,
        6, 1.03, -6.79121851111365, 7.15999999999999, 1.69420695090321, 0, 0, 0, 0, 2, 5, -1, 22, 1.1, 0.9,
        7, 1.01, -16.8923649773921, 6.99999999999989, 1.87707053136074, 0, 0, 0, 0, 2, 5, -1, 22, 1.1, 0.9,
        8, 0.975456848222498, -31.9879803231146, 0, 0, 2.51e-12, -7.33e-13, 0, 5, 3, 9999, -9999, 230, 1.5, 0.5,
        9, 0.96599338447659, -37.3619111688474, 0, 0, 17.6499999999946, 0.999999999999238, 0, 0, 3, 9999, -9999, 115, 1.05, 0.95,
        10, 0.999633277992536, 2.04494056823949, 0, 0, -4.56e-15, 2.83e-14, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5,
        11, 0.972748828123374, -18.8936878638201, 0, 0, 8.08e-13, -3.06e-13, 0, 0, 3, 2, -9999, 500, 1.5, 0.5,
        12, 1.00922979248247, -13.3964377456387, 0, 0, 1.44e-13, -4.91e-15, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5,
        13, 0.985781651869958, -23.6351289052543, 0, 0, 1.57e-12, -2.27e-13, 0, 0, 3, 9999, -9999, 230, 1.5, 0.5;

    cout << "bsu is \n" << bus << "\n";

    MatrixXd mac_con(4, 23);
    
    mac_con << 1, 1, 900, 0.2, 0, 1.8, 0.25, 0, 8, 0, 1.7, 0.25, 0, 0.4, 0, 6.5, 6.5, 0, 1, 0, 0, 1, 1,
           2, 2, 900, 0.2, 0, 1.8, 0.25, 0, 8, 0, 1.7, 0.25, 0, 0.4, 0, 6.5, 6.5, 0, 2, 0, 0, 1, 1,
           3, 6, 900, 0.2, 0, 1.8, 0.25, 0, 8, 0, 1.7, 0.25, 0, 0.4, 0, 6.5, 6.5, 0, 6, 0, 0, 1, 1,
           4, 7, 900, 0.2, 0, 1.8, 0.25, 0, 8, 0, 1.7, 0.25, 0, 0.4, 0, 6.5, 6.5, 0, 7, 0, 0, 1, 1;

    cout << "mac_con is \n" << mac_con << "\n";

    MatrixXd bus_int(13, 1);
    bus_int << 1,
            2,
            3,
            4,
            5,
            6,
            7,
            8,
            9,
            10,
            11,
            12,
            13;
    cout << "bu_int is \n" << bus_int <<  "\n";
    
    MatrixXd mac_tra_idx(4, 1);
    mac_tra_idx << 1,
            2,
            3,
            4;
    
    cout << "mac_tra_idx is \n" << mac_tra_idx << "\n";

    double i = 0;
    double k = 0;
    double flag = 0;
    double n_tra = 4;
    double basmva = 100;

    mac_tra(bus,mac_con,bus_int,mac_tra_idx,i,k,flag,n_tra,basmva);

    return 0;
}